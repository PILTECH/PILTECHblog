{% load static %}
<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="{% static 'piltechblog/style.css' %}">
<script src="{% static 'piltechblog/script.js' %}"></script>
</head>
<body>

{% for entry in entries %}
    <div class="post">
        <h2>{{ entry.title }}</h2>
        <p>{{ entry.content }}</p>

        <div class="gallery">
            {% with entry.images.all as imgs %}
                {% if imgs %}
                    <div class="gallery-main img-wrapper">
                        <img src="{{ imgs.0.image.url }}" alt="Zdjęcie główne">
                    </div>
                    <div class="gallery-side">
                        {% for img in imgs|slice:"1:4" %}
                            <div class="img-wrapper">
                                <img src="{{ img.image.url }}" alt="Zdjęcie dodatkowe">
                            </div>
                        {% endfor %}
                        {% if imgs|length > 4 %}
                            <div class="gallery-more img-wrapper">
                                <img src="{{ imgs.4.image.url }}" alt="Zdjęcie dodatkowe">
                                <span>+{{ imgs|length|add:"-5" }}</span>
                            </div>
                        {% endif %} 
                    </div>                              
                {% endif %}
            {% endwith %}
        </div>
        <small>{{ entry.created_at|date:"d M Y H:i" }}</small>
    </div>
{% empty %}
    <p>Brak wpisów. Dodaj coś powyżej.</p>
{% endfor %}
</body>
</html>
